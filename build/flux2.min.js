!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Flux2=e():t.Flux2=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r=n(1),o=n(12),i=n(21),s=new r;o.prototype.defaultDispatcher=s,t.exports={Dispatcher:s,WatchStoreMixin:i(o),createStore:function(t){return new o(t)},createDispatcher:function(t){return new r(t)}}},function(t,e,n){"use strict";var r=n(2),o=n(9),i=function(t){var t="object"==typeof t?t:{};this.debugLog=Boolean(t.debugLog),this._registeredStoresByName={},this._registeredStoresByID={},this._lastRegisteredStoreID=0};i.prototype.register=function(t,e,n,o){this._callbacks=this._callbacks||{};var i=this._lastCallbackID||0,s=!1,c=this._callbacks[t]||{};return r(c,function(t){t&&t.callback===e&&(s=!0)}),s||(c[++i]={callback:e,context:n||this,options:"object"==typeof o?o:{}},this._callbacks[t]=c,this._lastCallbackID=i),this},i.prototype.registerOnce=function(t,e,n){this.register(t,e,n,{once:!0})},i.prototype.dispatch=function(t,e){if(this._callbacks&&this._callbacks[t]){var n=this._callbacks[t],i=[];r(n,function(t,n){t&&"function"==typeof t.callback&&(t.callback.apply(t.context,e&&[e]),t.options.once&&i.push(callbackId))}),o(i,function(t){delete n[t]})}return this},i.prototype.unregister=function(t,e){if(this._callbacks&&this._callbacks[t]){var n=this._callbacks[t];r(n,function(t,r){t.callback===e&&delete n[r]})}return this},i.prototype.waitFor=function(t,e){for(var t=Array.isArray(t)?t:[t],n={counter:0,chains:t,callback:e},r=0,o=t.length;r<o;r++){n.counter++;var i=Object.assign({},n,{store:t[r].store});t[r].store.on("change",s,i)}0===n.counter&&"function"==typeof e&&e()};var s=function(t){var e=this;r(this.chains,function(n){n.store===e.store&&n.ready(t)&&(n.store.off("change",s),e.counter--,e.counter<1&&"function"==typeof e.callback&&e.callback())})};i.prototype._registerStore=function(t){if(this.debugLog&&console&&console.debug&&console.debug("Dispatcher.registerStore(%s)",t.name||"unknown",t),this._lastRegisteredStoreID++,this._registeredStoresByID[this._lastRegisteredStoreID]=t,"undefined"!=typeof t.name){var e=t.name;this._registeredStoresByName[e]?this._registeredStoresByName[e]!==t&&console&&console.warn&&console.warn('Dispatcher: another store with specified name "%s" is already registered. Specified name was ignored.',e,this._registeredStoresByName[e]):this._registeredStoresByName[e]=t}return this._lastRegisteredStoreID},i.prototype._unregisterStore=function(t){if(this.debugLog&&console&&console.debug&&console.debug("Dispatcher.unregisterStore(%s)",t),this._registeredStoresByID[t]&&this._registeredStoresByID[t].name){var e=this._registeredStoresByID[t].name;delete this._registeredStoresByName[e]}delete this._registeredStoresByID[t]},i.prototype.getStore=function(t){return"number"==typeof t&&this._registeredStoresByID[t]?this._registeredStoresByID[t]:!!this._registeredStoresByName[t]&&this._registeredStoresByName[t]},i.prototype.getState=function(t){var e=this.getStore(t);return"object"==typeof e&&e.state},i.prototype.setState=function(t,e){this.debugLog&&console&&console.debug&&console.debug("Dispatcher.setState(%s)",t,e);var n=this.getStore(t);return n?(n.name&&this.dispatch("set"+n.name+"State",e),this.dispatch("setStore"+n._registeredStoreID+"State",e),n.setState(e)):(console&&console.warn&&console.warn('Dispatcher: specified store "%s" for setState() is not found.',t),!1)},i.prototype.appendState=function(t,e){this.debugLog&&console&&console.debug&&console.debug("Dispatcher.appendState(%s)",t,e);var n=this.getStore(t);if(n){var o,i=n.state,s={};return r(e,function(t,e){Array.isArray(t)?(o=Array.isArray(i[e])?i:[],s[e]=o.concat(t)):s[e]=t}),this.setState(t,s)}return console&&console.warn&&console.warn('Dispatcher: specified store "%s" for appendState() is not found.',t),!1},t.exports=i},function(t,e,n){function r(t,e){return i(t,e,c)}function o(t){return function(e,n,r){return"function"==typeof n&&void 0===r||(n=s(n,r,3)),t(e,n)}}var i=n(3),s=n(4),c=n(5),u=o(r);t.exports=u},function(t,e){function n(t){return function(e,n,r){for(var o=-1,i=Object(e),s=r(e),c=s.length;c--;){var u=s[t?c:++o];if(n(i[u],u,i)===!1)break}return e}}var r=n();t.exports=r},function(t,e){function n(t,e,n){if("function"!=typeof t)return r;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)};case 5:return function(n,r,o,i,s){return t.call(e,n,r,o,i,s)}}return function(){return t.apply(e,arguments)}}function r(t){return t}t.exports=n},function(t,e,n){function r(t){return function(e){return null==e?void 0:e[t]}}function o(t){return null!=t&&s(b(t))}function i(t,e){return t="number"==typeof t||h.test(t)?+t:-1,e=null==e?g:e,t>-1&&t%1==0&&t<e}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=g}function c(t){for(var e=a(t),n=e.length,r=n&&t.length,o=!!r&&s(r)&&(p(t)||l(t)),c=-1,u=[];++c<n;){var f=e[c];(o&&i(f,r)||v.call(t,f))&&u.push(f)}return u}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&s(e)&&(p(t)||l(t))&&e||0;for(var n=t.constructor,r=-1,o="function"==typeof n&&n.prototype===t,c=Array(e),a=e>0;++r<e;)c[r]=r+"";for(var f in t)a&&i(f,e)||"constructor"==f&&(o||!v.call(t,f))||c.push(f);return c}var f=n(6),l=n(7),p=n(8),h=/^\d+$/,y=Object.prototype,v=y.hasOwnProperty,d=f(Object,"keys"),g=9007199254740991,b=r("length"),S=d?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&o(t)?c(t):u(t)?d(t):[]}:c;t.exports=S},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return s(n)?n:void 0}function o(t){return i(t)&&p.call(t)==c}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function s(t){return null!=t&&(o(t)?h.test(f.call(t)):n(t)&&u.test(t))}var c="[object Function]",u=/^\[object .+?Constructor\]$/,a=Object.prototype,f=Function.prototype.toString,l=a.hasOwnProperty,p=a.toString,h=RegExp("^"+f.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e){function n(t){return o(t)&&y.call(t,"callee")&&(!d.call(t,"callee")||v.call(t)==f)}function r(t){return null!=t&&s(t.length)&&!i(t)}function o(t){return u(t)&&r(t)}function i(t){var e=c(t)?v.call(t):"";return e==l||e==p}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function c(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t){return!!t&&"object"==typeof t}var a=9007199254740991,f="[object Arguments]",l="[object Function]",p="[object GeneratorFunction]",h=Object.prototype,y=h.hasOwnProperty,v=h.toString,d=h.propertyIsEnumerable;t.exports=n},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return c(n)?n:void 0}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=g}function i(t){return s(t)&&y.call(t)==a}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){return null!=t&&(i(t)?v.test(p.call(t)):n(t)&&f.test(t))}var u="[object Array]",a="[object Function]",f=/^\[object .+?Constructor\]$/,l=Object.prototype,p=Function.prototype.toString,h=l.hasOwnProperty,y=l.toString,v=RegExp("^"+p.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),d=r(Array,"isArray"),g=9007199254740991,b=d||function(t){return n(t)&&o(t.length)&&y.call(t)==u};t.exports=b},function(t,e,n){function r(t,e){return function(n,r,o){return"function"==typeof r&&void 0===o&&c(n)?t(n,r):e(n,s(r,o,3))}}var o=n(10),i=n(11),s=n(4),c=n(8),u=r(o,i);t.exports=u},function(t,e){function n(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}t.exports=n},function(t,e,n){function r(t,e){return h(t,e,f)}function o(t){return function(e){return null==e?void 0:e[t]}}function i(t,e){return function(n,r){var o=n?y(n):0;if(!c(o))return t(n,r);for(var i=e?o:-1,s=u(n);(e?i--:++i<o)&&r(s[i],i,s)!==!1;);return n}}function s(t){return function(e,n,r){for(var o=u(e),i=r(e),s=i.length,c=t?s:-1;t?c--:++c<s;){var a=i[c];if(n(o[a],a,o)===!1)break}return e}}function c(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=l}function u(t){return a(t)?t:Object(t)}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var f=n(5),l=9007199254740991,p=i(r),h=s(),y=o("length");t.exports=p},function(t,e,n){var r=n(13),o=n(14),i=n(15),s=function(t,e){if(i(this,t),"function"==typeof this.getInitialState?this.state=i({},this.getInitialState()):this.state={},"undefined"==typeof this.dispatcher&&(this.dispatcher=this.defaultDispatcher),"undefined"!=typeof this.init&&(this.init(),console&&console.warn&&console.warn("Store: you use deprecated property init() to construct store. Please use getInitialState() instead.",this)),"function"==typeof this.storeWillRegister){var n=this.storeWillRegister();if(n)return null}this._registeredStoreID=this.dispatcher._registerStore(this),"function"==typeof this.storeDidRegister&&this.storeDidRegister()};o(s,r),s.prototype.setState=function(t){if("function"==typeof this.shouldStoreUpdate&&!this.shouldStoreUpdate(t))return!1;var e=this.state,n=i({},e,t);return"function"==typeof this.storeWillUpdate&&this.storeWillUpdate(n),this.state=n,this.emit("change",n),"function"==typeof this.storeDidUpdate&&this.storeDidUpdate(e),!0},s.prototype.destroy=function(){"function"==typeof this.storeWillUnregister&&this.storeWillUnregister(),this.dispatcher._unregisterStore(this._registeredStoreID),this.state={}},t.exports=s},function(t,e){"use strict";function n(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function r(){}r.prototype._events=void 0,r.prototype.listeners=function(t){if(!this._events||!this._events[t])return[];if(this._events[t].fn)return[this._events[t].fn];for(var e=0,n=this._events[t].length,r=new Array(n);e<n;e++)r[e]=this._events[t][e].fn;return r},r.prototype.emit=function(t,e,n,r,o,i){if(!this._events||!this._events[t])return!1;var s,c,u=this._events[t],a=arguments.length;if("function"==typeof u.fn){switch(u.once&&this.removeListener(t,u.fn,!0),a){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,r),!0;case 5:return u.fn.call(u.context,e,n,r,o),!0;case 6:return u.fn.call(u.context,e,n,r,o,i),!0}for(c=1,s=new Array(a-1);c<a;c++)s[c-1]=arguments[c];u.fn.apply(u.context,s)}else{var f,l=u.length;for(c=0;c<l;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,!0),a){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,n);break;default:if(!s)for(f=1,s=new Array(a-1);f<a;f++)s[f-1]=arguments[f];u[c].fn.apply(u[c].context,s)}}return!0},r.prototype.on=function(t,e,r){var o=new n(e,r||this);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],o]:this._events[t].push(o):this._events[t]=o,this},r.prototype.once=function(t,e,r){var o=new n(e,r||this,(!0));return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],o]:this._events[t].push(o):this._events[t]=o,this},r.prototype.removeListener=function(t,e,n){if(!this._events||!this._events[t])return this;var r=this._events[t],o=[];if(e&&(r.fn&&(r.fn!==e||n&&!r.once)&&o.push(r),!r.fn))for(var i=0,s=r.length;i<s;i++)(r[i].fn!==e||n&&!r[i].once)&&o.push(r[i]);return o.length?this._events[t]=1===o.length?o[0]:o:delete this._events[t],this},r.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[t]:this._events={},this):this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){return this},r.EventEmitter=r,r.EventEmitter2=r,r.EventEmitter3=r,t.exports=r},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){function r(t,e,n){for(var r=-1,o=s(e),i=o.length;++r<i;){var c=o[r],u=t[c],a=n(u,e[c],c,t,e);(a===a?a===u:u!==u)&&(void 0!==u||c in t)||(t[c]=a)}return t}var o=n(16),i=n(18),s=n(5),c=i(function(t,e,n){return n?r(t,e,n):o(t,e)});t.exports=c},function(t,e,n){function r(t,e){return null==e?t:o(e,i(e),t)}var o=n(17),i=n(5);t.exports=r},function(t,e){function n(t,e,n){n||(n={});for(var r=-1,o=e.length;++r<o;){var i=e[r];n[i]=t[i]}return n}t.exports=n},function(t,e,n){function r(t){return s(function(e,n){var r=-1,s=null==e?0:n.length,c=s>2?n[s-2]:void 0,u=s>2?n[2]:void 0,a=s>1?n[s-1]:void 0;for("function"==typeof c?(c=o(c,a,5),s-=2):(c="function"==typeof a?a:void 0,s-=c?1:0),u&&i(n[0],n[1],u)&&(c=s<3?void 0:c,s=1);++r<s;){var f=n[r];f&&t(e,f,c)}return e})}var o=n(4),i=n(19),s=n(20);t.exports=r},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&s(f(t))}function o(t,e){return t="number"==typeof t||u.test(t)?+t:-1,e=null==e?a:e,t>-1&&t%1==0&&t<e}function i(t,e,n){if(!c(n))return!1;var i=typeof e;if("number"==i?r(n)&&o(e,n.length):"string"==i&&e in n){var s=n[e];return t===t?t===s:s!==s}return!1}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function c(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var u=/^\d+$/,a=9007199254740991,f=n("length");t.exports=i},function(t,e){function n(t,e){if("function"!=typeof t)throw new TypeError(r);return e=o(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=o(n.length-e,0),s=Array(i);++r<i;)s[r]=n[e+r];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,n[0],s);case 2:return t.call(this,n[0],n[1],s)}var c=Array(e+1);for(r=-1;++r<e;)c[r]=n[r];return c[e]=s,t.apply(this,c)}}var r="Expected a function",o=Math.max;t.exports=n},function(t,e,n){var r=n(9),o=n(15),i=function(t){var e=function(){for(var e=[],s=0,c=arguments.length;s<c;s++)e.push(arguments[s]);return{getInitialState:function(){var n,i=this,s=!1;return r(e,function(e){e instanceof t?s||"function"==typeof i.getStateFromStore&&(n=i.getStateFromStore(),s=!0):"object"==typeof e&&"function"==typeof e.initialState&&("object"!=typeof n&&(n={}),o(n,e.initialState.call(i,e.store)))}),n},componentDidMount:function(){var s=this;r(e,function(e){e instanceof t?e.on("change",n,{store:e,context:s}):"object"==typeof e&&e.store&&e.store.on("change",i,{config:o({},e),context:s})})},componentWillUnmount:function(){r(e,function(e){e instanceof t?e.off("change",n):"object"==typeof e&&e.store&&e.store.off("change",i)})}}},n=function(t){var e=this.context;"function"==typeof e.getStateFromStore?e.setState(e.getStateFromStore(t,this.store)):console&&console.warn&&console.warn("WatchStoreMixin: method `getStateFromStore` is not found in target component",e)},i=function(t){var e,n=this.context,r=this.config;"function"==typeof r.change&&(e=r.change.call(n,t,r.store)),"object"==typeof e&&n.setState(e)};return e};t.exports=i}])});
//# sourceMappingURL=flux2.min.js.map